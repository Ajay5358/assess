import sqlite3
import os

def check_database():
    db_path = 'cve_database.db'
    
    # Check if database file exists
    if not os.path.exists(db_path):
        print(f"‚ùå Database file '{db_path}' does not exist!")
        return False
    
    print(f"‚úÖ Database file exists: {db_path}")
    print(f"üìä File size: {os.path.getsize(db_path)} bytes")
    
    try:
        conn = sqlite3.connect(db_path)
        cursor = conn.cursor()
        
        # Check if table exists
        cursor.execute("SELECT name FROM sqlite_master WHERE type='table' AND name='cves'")
        table_exists = cursor.fetchone()
        
        if table_exists:
            print("‚úÖ 'cves' table exists")
            
            # Count records
            cursor.execute("SELECT COUNT(*) FROM cves")
            count = cursor.fetchone()[0]
            print(f"üìà Total CVE records: {count}")
            
            # Show some sample data
            if count > 0:
                cursor.execute("SELECT id, description FROM cves LIMIT 5")
                sample_data = cursor.fetchall()
                print("\nüìã Sample CVEs:")
                for cve_id, description in sample_data:
                    print(f"  - {cve_id}: {description[:100]}...")
            else:
                print("‚ùå No records found in cves table!")
                
        else:
            print("‚ùå 'cves' table does not exist!")
            
        conn.close()
        return table_exists and count > 0
        
    except Exception as e:
        print(f"‚ùå Error accessing database: {e}")
        return False

if __name__ == '__main__':
    check_database()